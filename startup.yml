# startup.yml — Post-Boot Startup Hook
#
# What happens after BOOT completes?
# This file configures the default startup behavior.
#
# INVOCATION CHAIN:
#   BOOT
#     → PROBE (gather environment info)
#     → DETECT-DRIVER (load platform adapter)
#     → WARM-CONTEXT (load foundational files)
#     → SELF-DESCRIBE (orientation)
#     → STARTUP (THIS FILE)
#         → adventure:RESUME (if mode=adventure)
#             → adventure:START (if no character selected)
#                 → adventure:ENSURE-CHARACTER (if no character exists)
#                     → adventure:CREATE-CHARACTER (if mode=generate)
#
# OVERRIDE: Create startup.local.yml (gitignored) to customize.
# The local file completely replaces this one when present.
#
# USAGE:
#   BOOT               → full chain including startup hook
#   BOOT --no-startup  → bootstrap only, skip startup hook
#
# This file is CHECKED INTO THE REPO for good out-of-box experience.
# Users can copy to startup.local.yml and customize.

startup:
  
  # What mode to start in?
  # Options: adventure, development, custom, none
  mode: adventure
  
  # ADVENTURE MODE
  # Loads an adventure and resumes or starts fresh
  
  adventure:
    # Which adventure to load?
    path: examples/adventure-4
    
    # Resume or start fresh?
    # Options: resume, start, ask
    #   resume → Continue where last session left off
    #   start  → Fresh start (RESTART)
    #   ask    → Prompt user to choose
    action: resume
    
    # If no selected characters, what to do?
    # Options: generate, prompt, error
    #   generate → Create a default character and select them
    #   prompt   → Ask user to create/select a character
    #   error    → Fail with helpful message
    no_character: prompt
    
    # Default character template (used when generating)
    default_character:
      template: characters/abstract/player/CHARACTER.yml
      start_room: start/
      
    # Welcome message after resume/start
    welcome: true
    
  # DEVELOPMENT MODE
  # For working on MOOLLM itself (no adventure, just tools ready)
  
  development:
    show_probe: true
    suggest_tasks: true
    
  # CUSTOM MODE  
  # Run arbitrary commands after boot
  
  custom:
    # List of protocol commands to execute
    commands: []
    # Example:
    # commands:
    #   - "LOOK"
    #   - "INVENTORY"
    
  # Message to display after startup completes
  ready_message: |
    Ready to play! Type LOOK to see where you are.
    
    Quick commands:
      LOOK        — Describe your surroundings
      GO <dir>    — Move in a direction  
      INVENTORY   — What are you carrying?
      HELP        — Show all commands

# RESUME vs START behavior
#
# RESUME:
#   1. Read ADVENTURE.yml for current state
#   2. Read player.location to find current room
#   3. If party.selection is empty but party.members exists, select the party
#   4. Describe current room with context of what happened before
#   5. "Welcome back! You were..."
#
# START (RESTART):
#   1. Reset ADVENTURE.yml to initial state (turn: 0, status: ready)
#   2. Move all party members to starting_room
#   3. Clear flags, evidence, quest_log
#   4. Keep character personalities and earned skills
#   5. "A new adventure begins..."
#
# NO CHARACTER HANDLING:
#   If no character exists at all:
#     → prompt: "Before we begin, let's create your character..."
#     → generate: Create from default_character template
#   If character exists but not selected:
#     → Auto-select the player character

# OVERRIDE EXAMPLE
#
# Create startup.local.yml with:
#
# startup:
#   mode: adventure
#   adventure:
#     path: examples/my-custom-adventure
#     action: start
#     no_character: generate


# OVERRIDE EXAMPLE
#
# Create startup.local.yml with:
#
# startup:
#   mode: adventure
#   adventure:
#     path: examples/my-custom-adventure
#     action: start
#     no_character: generate
