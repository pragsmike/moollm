# cold.yml — Files Paged Out of Context
#
# What files have been removed from context and why?
# This is the "cooling" side of memory management.
#
# PURPOSE:
#   - Custom orchestrator: Tracks what was summarized/removed
#   - Cursor driver: Advisory; documents what was forgotten
#   - Debugging: "Why doesn't it remember X?"
#   - Recovery: Know what to reload if needed
#
# HONEST FORGETTING:
#   We don't just drop files — we document what was forgotten
#   and why, leaving breadcrumbs for recovery.

cold:
  
  # Last updated
  updated: null  # ISO 8601
  
  # SESSION ARCHIVE
  # Files that were hot this session but cooled down
  
  session:
    # - path: "examples/adventure-4/maze/room-a/ROOM.yml"
    #   cooled_at: "2024-01-15T11:30:00Z"
    #   reason: "Player left the maze"
    #   last_access: "2024-01-15T10:45:00Z"
    #   access_count: 3
    #   summary_available: true
    #   summary_path: "summaries/maze-room-a.md"
    []
    
  # SUMMARIZED FILES
  # Large files that have been compressed
  
  summarized:
    # - original_path: "examples/adventure-4/TRANSCRIPT.md"
    #   summary_path: "summaries/transcript-current.md"
    #   summarized_at: "2024-01-15T11:00:00Z"
    #   reason: "Transcript exceeded 10K tokens"
    #   original_tokens: 15000
    #   summary_tokens: 800
    #   compression_ratio: 0.053
    #   summary_model: "gpt-4o-mini"  # Model used for summarization
    #   key_points:
    #     - "Player explored maze, found key"
    #     - "Met NPC Marieke in pub"
    #     - "Current quest: find the treasure"
    []
    
  # PERMANENTLY COLD
  # Files that should stay out of context
  
  permanent:
    description: "Files that don't need to be in context"
    patterns:
      - "*.png"           # Images (can't be in text context)
      - "*.jpg"
      - "temp/*"          # Temporary files
      - "archive/*"       # Archived content
      - ".git/*"          # Git internals
      
  # RECOVERY HINTS
  # How to bring files back if needed
  
  recovery:
    # - path: "examples/adventure-4/characters/don-hopkins/CHARACTER.yml"
    #   how_to_recover: "Player asks about Don Hopkins"
    #   keywords: ["don", "hopkins", "player character"]
    #   priority_if_mentioned: high
    []
    
  # FORGETTING LOG
  # Recent cooling events for debugging
  
  log:
    # - timestamp: "2024-01-15T11:30:00Z"
    #   action: "cooled"
    #   path: "examples/adventure-4/maze/room-a/ROOM.yml"
    #   reason: "Idle for 5 calls"
    #   
    # - timestamp: "2024-01-15T11:00:00Z"
    #   action: "summarized"
    #   path: "examples/adventure-4/TRANSCRIPT.md"
    #   reason: "Exceeded token budget"
    []

# ORCHESTRATOR BEHAVIOR
#
# Custom orchestrator (moollm-orchestrator):
#   1. Track file access during session
#   2. When file goes idle (N calls without access):
#      - Move entry from hot.yml to cold.yml
#      - Optionally create summary via summarization model
#   3. When context budget exceeded:
#      - Summarize largest low-priority files
#      - Move originals to cold.yml
#      - Add summaries to working-set.yml
#   4. Maintain recovery hints for quick reload
#
# Cursor driver:
#   - Cursor handles forgetting automatically
#   - cold.yml is DIAGNOSTIC only
#   - Enable for debugging: kernel.config.track_hot_cold: true
#   - Answers: "Why did it forget about X?"
#   - Like Self deoptimization: reconstruct history on demand

# SUMMARIZATION PROTOCOL
#
# When a file is too large or going cold:
#   1. Call summarization model (cheaper, faster)
#   2. Generate summary with key points
#   3. Store summary in summaries/ directory
#   4. Update cold.yml with summary location
#   5. Summary can be loaded instead of original
#
# See: skills/summarize/, skills/honest-forget/

# SELF-LIKE DEOPTIMIZATION
#
# Just as Self can reconstruct stack frames that were
# optimized away, MOOLLM can reconstruct context state:
#
#   - hot.yml: What SHOULD be in context
#   - cold.yml: What WAS in context and why it left
#   - working-set.yml: What IS in context right now
#
# Even if Cursor handles this automatically, we can
# reconstruct the causal chain for debugging:
#   "Why doesn't it know about X?"
#   → Check cold.yml: Was it summarized? When?
#   → Check hot.yml: Was it ever marked important?
#   → Check working-set.yml: Is it actually loaded?
