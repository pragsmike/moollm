# hot.yml — Files That Should Be In Context
#
# What files should be loaded into the LLM's context?
# This is the "heating" side of memory management.
#
# PURPOSE:
#   - Custom orchestrator: Reads this to build prompt context
#   - Cursor driver: Advisory; suggests what to prioritize
#   - Bootstrap: Establishes initial context at session start
#   - Debugging: Explicit declaration of what's "hot"
#
# ANALOGY:
#   Like Self's dynamic deoptimization — we can reconstruct
#   the "call stack" of context on demand, even if Cursor
#   handles it automatically most of the time.

hot:
  
  # Last updated
  updated: null  # ISO 8601
  
  # Who updated this? (LLM, orchestrator, human)
  updated_by: null
  
  # Why was it updated?
  reason: null

  # PRIORITY TIERS
  # Files are loaded in tier order until budget exhausted
  
  critical:
    # Always load these. Session fails without them.
    description: "Foundational files that define MOOLLM behavior"
    files:
      - path: "kernel/constitution-core.md"
        reason: "Core principles, invariants, YAML Jazz, Postel"
        sections: ["full"]  # or ["§1-5", "§13"] for partial
        
      # - path: "skills/moollm/SKILL.md"
      #   reason: "Meta-skill for self-explanation"
      
  high:
    # Load these if budget allows. Important for current task.
    description: "Task-relevant files"
    files:
      # - path: "examples/adventure-4/ADVENTURE.yml"
      #   reason: "Current game state"
      #   
      # - path: "examples/adventure-4/pub/ROOM.yml"
      #   reason: "Current location"
      []
      
  medium:
    # Nice to have. Provides helpful context.
    description: "Supporting context"
    files:
      # - path: "skills/INDEX.yml"
      #   reason: "Know what skills exist"
      []
      
  low:
    # Load if plenty of budget remains.
    description: "Background knowledge"
    files: []
    
  # CONTEXTUAL TRIGGERS
  # Files that become hot based on conditions
  
  triggers:
    # - condition: "in_room('pub')"
    #   add_to_high:
    #     - path: "examples/adventure-4/pub/ROOM.yml"
    #       reason: "Player is in the pub"
    #       
    # - condition: "skill_active('postel')"
    #   add_to_high:
    #     - path: "skills/postel/SKILL.md"
    #       reason: "Postel skill is being used"
    []
    
  # DECAY RULES
  # When do files cool down?
  
  decay:
    # Files not accessed in N calls move to cold
    idle_threshold: 5  # calls
    
    # Exceptions: files that never decay
    permanent:
      - "kernel/constitution-core.md"
      
    # Files that decay quickly (session-specific)
    volatile:
      - pattern: "summaries/*"
        decay_after: 2  # calls

# ORCHESTRATOR BEHAVIOR
#
# Custom orchestrator (moollm-orchestrator):
#   1. Read hot.yml at session start
#   2. Load files in priority order until budget reached
#   3. Track access patterns during session
#   4. Update hot.yml based on actual usage
#   5. Move unused files to cold.yml
#
# Cursor driver:
#   - Cursor handles context with vector search
#   - hot.yml is ADVISORY
#   - Enable explicit tracking for debugging:
#     kernel.config.track_hot_cold: true
#   - Useful for: "Why did it forget X?"
#   - Post-hoc reconstruction like Self deoptimization

# BOOTSTRAP EXAMPLE
#
# At session start, orchestrator might do:
#   1. Load hot.yml
#   2. Load all 'critical' files
#   3. Load 'high' files if budget allows
#   4. Build prompt with these files
#   5. Update working-set.yml with what was actually loaded
