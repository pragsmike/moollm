card:
  name: secret-word (pub)
  type: [card, sidecar, room-item]
  tier: 1
  invoke_when: ["room enters", "object inspected", "game starts"]
  advertisement_names:
    - SECRET-WORD
    - SET-SECRET-WORD
    - SET-REACTION
    - TELL-SECRET-WORD
    - TELL-REACTION
  prototypes:
    - skills/card/examples/peewee-herman-secret-word.yml
  related:
    - skills/card/examples/peewee-herman-secret-word.yml
  tags: [moollm, secret-word, pub, pee-wee]
  description: |
    Pub-local secret word card. Inherits Pee-wee behavior; word set to MOOLLM.
    Drop-in sidecar for the pub so saying the word triggers the famous scream.

secret_word: "MOOLLM"
reaction: "AUGH! Everyone screams and the pie table spins faster!"

advertisements:
  SECRET-WORD:
    synonyms: [THE-SECRET-WORD]
    score: 90
    condition: "Someone says the secret word"
    effect: "Trigger the Pee-wee scream and inherited effects"
    delegate:
      method: TRIGGER-SECRET-WORD
      params:
        word: "{{secret_word}}"

  TELL-SECRET-WORD:
    synonyms: [REVEAL-SECRET-WORD]
    score: 70
    condition: "Someone asks politely and says PLEASE"
    effect: "Share the current secret word (no scream)."
    delegate:
      method: TELL-SECRET-WORD
      params: {}

  TELL-REACTION:
    synonyms: [SHOW-REACTION]
    score: 60
    condition: "Asked about the reaction"
    effect: "Share the current reaction text."
    delegate:
      method: TELL-REACTION
      params: {}

tools:
  required: []
  optional: []

methods:
  TRIGGER-SECRET-WORD:
    description: "Fire the secret word reaction (room-local)."
    parameters: { word: "What was said" }
    output: chat
    effect: "If the word matches, emit the reaction (screaming!)."

  SET-SECRET-WORD:
    description: "Change the secret word at runtime."
    parameters:
      new_word: "The new secret word"
      reaction: "Optional new reaction"
    output: chat
    effect: "Updates secret_word (and reaction if provided) for this instance."

  SET-REACTION:
    description: "Change the reaction without changing the word."
    parameters: {}
    output: chat
    effect: "Updates the reaction for this instance."

  TELL-SECRET-WORD:
    description: "Reveal the secret word when asked politely (with PLEASE)."
    parameters: { please: "Literal token 'PLEASE' required" }
    output: chat
    effect: "If request includes PLEASE, returns the secret word without triggering the scream."

  TELL-REACTION:
    description: "Reveal the current reaction (not secret)."
    parameters: {}
    output: chat
    effect: "Returns the reaction text."
