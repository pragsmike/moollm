# Planning Skill Prototype
# Structured task decomposition and progress tracking

skill:
  name: "planning"
  tier: 1
  description: "Manage complex tasks through structured plans"

inputs:
  plan_name:
    type: string
    required: true
    description: "Name for this plan"
    
  objective:
    type: string
    required: true
    description: "What this plan achieves"
    
  success_criteria:
    type: list
    required: true
    description: "How we know we're done"
    items:
      type: string
      
  initial_steps:
    type: list
    required: false
    default: []
    description: "Starting steps"
    items:
      name: string
      depends_on: list

outputs:
  plan_file:
    type: path
    description: "Path to PLAN.yml"
    
  progress_file:
    type: path
    description: "Path to PROGRESS.md"
    
  status:
    type: enum
    values: ["not_started", "in_progress", "completed", "blocked"]

working_set:
  hot:
    - "PLAN.yml"
    - "PROGRESS.md"

step_states:
  pending:
    symbol: "‚è≥"
    description: "Not yet started"
    can_transition_to: ["in_progress", "skipped"]
    
  in_progress:
    symbol: "üîÑ"
    description: "Currently working on"
    can_transition_to: ["done", "blocked", "pending"]
    
  done:
    symbol: "‚úÖ"
    description: "Successfully completed"
    can_transition_to: []
    
  blocked:
    symbol: "üö´"
    description: "Cannot proceed"
    can_transition_to: ["in_progress", "skipped"]
    
  skipped:
    symbol: "‚è≠Ô∏è"
    description: "Intentionally skipped"
    can_transition_to: []

operations:
  create_plan:
    - "Define objective and criteria"
    - "Decompose into steps"
    - "Identify dependencies"
    - "Write PLAN.yml"
    - "Generate PROGRESS.md"
    
  start_step:
    - "Verify dependencies done"
    - "Mark step in_progress"
    - "Update PROGRESS.md"
    
  complete_step:
    - "Record outcome"
    - "Mark step done"
    - "Update PROGRESS.md"
    - "Check if unblocks other steps"
    
  block_step:
    - "Mark step blocked"
    - "Add blocker description"
    - "Update PROGRESS.md"
    
  add_step:
    - "Insert step at position"
    - "Set dependencies"
    - "Record in revisions"
    - "Update PROGRESS.md"
    
  complete_plan:
    - "Verify all criteria met"
    - "Mark plan completed"
    - "Write retrospective"

conventions:
  step_ids:
    - "Sequential integers"
    - "Never reuse deleted IDs"
  dependencies:
    - "Reference by step ID"
    - "No circular dependencies"
  outcomes:
    - "Brief but informative"
    - "Include relevant details"
  revisions:
    - "Always include reason"
    - "Timestamp required"

lifecycle:
  create:
    - "Define objective"
    - "List success criteria"
    - "Decompose steps"
    - "Write files"
    
  execute:
    - "Start next available step"
    - "Do work"
    - "Record outcome"
    - "Update status"
    
  adapt:
    - "Add/remove steps"
    - "Reorder as needed"
    - "Record revisions"
    
  complete:
    - "Verify criteria"
    - "Mark done"
    - "Write retrospective"
