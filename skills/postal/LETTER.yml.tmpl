# LETTER.yml — Postal Message Primitive
#
# Letters are the narrative wrapper for goals, rewards, and communication.
# A letter from Mom is never just a letter.
#
# ═══════════════════════════════════════════════════════════════════════════════

letter:
  # === IDENTITY ===
  
  id: "{{letter_id}}"              # REQUIRED: Unique identifier
  
  # === ADDRESSING ===
  
  from: "{{sender}}"               # REQUIRED: mom, player, npc-id, room-path
  to: "{{recipient}}"              # REQUIRED: player, mom, npc-id, room-path
  
  subject: "{{subject}}"           # REQUIRED: Letter subject line
  
  # === CONTENT ===
  
  body: |                          # REQUIRED: The letter text
    {{letter_body}}
    
  # === ATTACHMENTS ===
  #
  # Letters can attach ANYTHING:
  # - Objects (items, gold)
  # - Cards (trading cards)
  # - Rooms (keys, access)
  # - Characters (introductions)
  # - Images (drawings, photos)
  # - Buffs (blessings, curses)
  # - Goals (quests)
  #
  
  attachments: []
  # Examples:
  #   - type: object
  #     ref: brass-key
  #     action: give           # give, send, reference
  #     
  #   - type: gold
  #     quantity: 50
  #     action: give
  #     
  #   - type: room
  #     ref: home/attic/
  #     action: unlock
  #     note: "You can visit the attic now"
  #     
  #   - type: image
  #     action: generate
  #     prompt: "A silver locket with filigree..."
  #     
  #   - type: buff
  #     ref:
  #       name: "Mom's Pride"
  #       effect: "+1 social"
  #       duration: "a while"
  
  # === GOAL INTEGRATION ===
  #
  # Letters can create, modify, or complete goals
  #
  
  creates_goal: null
  # Example:
  #   id: find-treasure
  #   name: "Find the Treasure"
  #   complete_when: "player has treasure"
  #   reward:
  #     letter: mom-reward-001
  #     item: family-heirloom
  
  modifies_goal: null
  # Example:
  #   id: find-treasure
  #   extend_with: "also bring it home safely"
  
  completes_goal: null
  # Example:
  #   id: find-treasure
  #   success: true
  
  # === METADATA ===
  
  sent: null                       # COMPUTED: When sent
  received: null                   # COMPUTED: When received
  read: false                      # COMPUTED: Has been read
  replied: false                   # COMPUTED: Has been replied to
  
  # === STATE ===
  
  status: draft                    # draft, pending, sent, delivered, read
  
  # === ROUTING ===
  #
  # For mail to rooms/storage:
  #
  destination_room: null           # If mailing to a room
  # Example: "storage/vault/"      # Mail items to your vault!

# ═══════════════════════════════════════════════════════════════════════════════
# EXAMPLES
# ═══════════════════════════════════════════════════════════════════════════════
#
# Letter from Mom with quest:
#
#   letter:
#     id: mom-quest-001
#     from: mom
#     to: player
#     subject: "A Favor to Ask"
#     
#     body: |
#       Dearest,
#       
#       I know you're busy adventuring, but could you
#       find grandmother's old locket? I think it's 
#       somewhere in the maze.
#       
#       Love, Mom
#       
#     creates_goal:
#       id: find-locket
#       name: "Find Grandmother's Locket"
#       complete_when: "player has family-locket"
#       reward:
#         letter: mom-thanks-001
#
# Reply with attachment:
#
#   letter:
#     id: player-reply-001
#     from: player
#     to: mom
#     subject: "Found it!"
#     
#     body: |
#       Mom! I found the locket!
#       Sending it with this letter.
#       
#     attachments:
#       - type: object
#         ref: family-locket
#         action: send
#         
#     completes_goal:
#       id: find-locket
#       success: true
#
# Reward letter:
#
#   letter:
#     id: mom-thanks-001
#     from: mom
#     to: player
#     subject: "My Wonderful Child!"
#     
#     body: |
#       You did it! I'm so proud!
#       Here's something grandmother wanted you to have.
#       
#     attachments:
#       - type: object
#         ref: grandmother-ring
#         action: give
#         
#       - type: buff
#         ref:
#           name: "Family Pride"
#           effect: "Warm feeling of accomplishment"
#           duration: "forever"
#
# Mail gold to vault:
#
#   letter:
#     id: deposit-001
#     from: player
#     to: player
#     subject: "Storing treasure"
#     destination_room: storage/vault/
#     
#     attachments:
#       - type: gold
#         quantity: 500
#         action: send
#
# ═══════════════════════════════════════════════════════════════════════════════
