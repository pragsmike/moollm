# CARD.yml â€” Multi-Presence
#
# Same card instantiated in multiple rooms simultaneously.
# "Be in two places at once. Three even."

card:
  id: multi-presence
  name: "Multi-Presence"
  type: [skill, parallel, distributed]
  
  emoji: ðŸ‘¥
  
  rarity: epic
  
  description: |
    Instantiate the same card in multiple rooms at once.
    Each instance has its own state but shares identity.
    
    Explore multiple branches, distributed work, consensus building.

# TOOLS REQUIRED

tools:
  required:
    - read_file
    - write_file
    - list_dir
  optional: []

tier: 1

# METHODS

methods:
  
  SPLIT:
    description: "Create a presence in another room"
    parameters:
      card: "Card to duplicate presence"
      destination: "Where to create instance"
    output: file (presence) + chat
    effect: "Create linked instance in new room"
    invoked_by: [player, card]
    
  SYNC:
    description: "Synchronize state between presences"
    parameters:
      presences: "Which instances to sync"
    output: state_change
    effect: "Merge divergent state"
    invoked_by: [player, coherence_engine]
    
  MERGE:
    description: "Combine multiple presences back into one"
    parameters:
      primary: "Which presence becomes the merged result"
      others: "Presences to absorb"
    output: state_change
    effect: "Combine state, remove other presences"
    invoked_by: [player]
    
  STATUS:
    description: "Show all active presences"
    parameters:
      card: "Which card"
    output: chat
    effect: "List all rooms where card is present"
    invoked_by: [player]

# STATE

state:
  presence_schema:
    source_card:
      type: path
      description: "Original card"
    location:
      type: path
      description: "Where this presence is"
    local_state:
      type: object
      description: "State divergent from source"
    siblings:
      type: array
      description: "Other presences of same card"

# USE CASES

use_cases:
  parallel_exploration: "Scout multiple dungeon branches"
  distributed_work: "Work on multiple files simultaneously"
  consensus_building: "Participate in debates in multiple rooms"
  hedge_bets: "Try different approaches, see which works"

# ADVERTISEMENTS

advertisements:
  PARALLEL_WORK:
    score: 90
    condition: "Need to do multiple things at once"
    
  EXPLORE_BRANCHES:
    score: 85
    condition: "Don't want to commit to one path"

# RELATED

see_also:
  - skills/card    # Cards can have presence
  - skills/room    # Where presences exist
  - skills/party   # Group dynamics

# CREDITS

credits:
  inspiration:
    - "Distributed systems"
    - "Quantum superposition (metaphorically)"
