# CARD Skill Prototype
# Portable tokens of capability, identity, and access

skill:
  name: "card"
  tier: 1  # File-only
  protocol: "CARD"
  
  description: |
    Portable tokens you can carry, give, play, and activate.
    Cards are TEMPLATES. Activate them in ROOMS to create instances.
    Each instance has state, parameters, goals, return value.
    Like little tasks, demons, familiars, spirits!
    
  motto: "Portable tokens of capability, identity, and access."
  origin: "LLOOOOMM experimental protocol"
  
  # Cards can be many things:
  examples:
    - trading_cards: "Hero-Story cards for real people's traditions and skills"
    - playing_cards: "Actions, abilities, spells to play"
    - key_cards: "Access tokens for rooms and resources"
    - receipts: "Proof of transaction, claim tickets"
    - tickets: "Entry passes, reservations, permissions"
    - business_cards: "Contact info, credentials"
    - pleasure_cards: "Memberships, VIP access, perks"
    - tarot: "Archetypal symbols for reflection"
    - hollerith: "Punch cards â€” data as physical holes!"
    - qr_codes: "Scannable data, links, actions"
    - wallet_cards: "Apple/Google Pay â€” phone as card carrier"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ACTIVATION MODEL (Cards in Play)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

activation:
  principle: |
    Cards are templates. Rooms are where they come to life.
    Activating a card = clone + parameterize into a room.
    Multiple instances of same card can exist.
    
  instance_schema:
    required:
      - instance_id    # Unique identifier
      - card           # Source card name
      - room           # Where it's activated
      - goal           # What this instance is working toward
      
    optional:
      - parameters     # Input parameters
      - state          # Current working state
      - subgoals       # Decomposed goals
      - return_value   # Filled when complete
      
  lifecycle:
    1_activate: "Clone card, parameterize, add to room"
    2_work: "Instance pursues its goal"
    3_complete: "Fill return_value, optionally remove"
    
  example: |
    # Instance in .agent/rooms/debug-session/goblin-001.yml
    activation:
      instance_id: "goblin-001"
      card: "Git Goblin"
      room: ".agent/rooms/debug-session/"
      
      parameters:
        repo_path: "/path/to/repo"
        
      goal: "Find when bug was introduced"
      
      state:
        current_commit: "abc123"
        remaining_commits: 5
        
      return_value: null  # Filled when done

inputs:
  card_name:
    type: string
    required: true
    description: "Name of the card"
    
  card_type:
    type: enum
    values: ["person", "character", "tool", "familiar", "concept", "place", "technique", "artifact"]
    required: true
    description: |
      person    â€” Real human (hero-story, safe K-line)
      character â€” Fictional persona
      tool      â€” A capability
      familiar  â€” Helper spirit for tools
      concept   â€” An abstract idea
      place     â€” A location/room link
      technique â€” A method/approach
      artifact  â€” A persistent thing
    
  rarity:
    type: enum
    values: ["common", "uncommon", "rare", "legendary"]
    default: "common"

outputs:
  card_file: "CARD.yml"
  collection_file: "COLLECTION.yml"
  deck_file: "DECK.yml"

card_schema:
  required:
    - name
    - type
    - ability
  optional:
    - rarity
    - power
    - cost
    - art
    - flavor_text
    - invokes
    - advertisements    # What this card can do, scored by context

# Cards can advertise their capabilities!
card_advertisements:
  description: |
    Just like objects in rooms, cards advertise what they can do.
    When you hold a card, its advertisements appear.
    Context affects scores â€” the right card for the moment rises to top.
    
  example: |
    # Git Goblin card advertisements
    advertisements:
      - action: BISECT
        description: "Binary search for bug introduction"
        score_if: "debugging AND has_git_repo"
        score: 90
        
      - action: BLAME
        description: "Find who changed this line"
        score_if: "examining_code"
        score: 70
        
      - action: LOG
        description: "Show commit history"
        score: 50
        
      - action: HELP
        description: "Explain git concepts"
        score: 30
        
  integration: |
    When card is in inventory:
      â†’ Advertisements visible but lower priority
      
    When card is played in room:
      â†’ Advertisements merge with room's object advertisements
      â†’ Character selects best action across all sources
      
    When multiple cards played:
      â†’ All advertisements compete
      â†’ Best action wins regardless of source

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ACTOR LINEAGE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

actor_model:
  description: |
    Cards-in-play ARE actors in the Hewitt/Kay/Simula tradition.
    Independent entities with state, situated in the microworld.
    
  lineage:
    hewitt_1973: "Original Actor model â€” concurrent independent agents"
    simula_1967: "Coroutines â€” suspended computation with state"
    smalltalk_1972: "Objects as actors â€” everything is message passing"
    self_1987: "Prototypes â€” no classes, clone and modify"
    
  in_moollm:
    card_template: "Prototype (like Self prototype)"
    card_in_play: "Actor (cloned, independent, stateful)"
    room: "Stage where actors perform"
    message: "Goal, parameter, or return_value"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# CARD TYPES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

card_types:
  person:
    description: "Real human's wisdom â€” HERO-STORY"
    also_called: "hero-story"
    safety: "K-line activation, not impersonation"
    typical_stats:
      - wisdom
      - domain_expertise
      - influence
    fields:
      invokes: "Traditions and ideas they represent"
      wisdom: "Key insight or quote"
      contributions: "What they created/discovered"
    examples:
      - "Dave Ungar â€” Self, prototypes, ITS-ABOUT-TIME"
      - "Seymour Papert â€” Logo, microworlds"
      - "Alan Kay â€” Smalltalk, messaging"
    integrates_with: "soul-chat (can speak their wisdom)"
    
  character:
    description: "Fictional persona with voice"
    typical_stats:
      - wisdom
      - creativity
      - domain_expertise
    integrates_with: "soul-chat"
    
  tool:
    description: "A capability that does something"
    typical_stats:
      - power
      - reliability
      - versatility
      
  familiar:
    description: "Tool capability as helper spirit"
    typical_stats:
      - helpfulness
      - domain_coverage
      - reliability
    examples:
      - "ğŸ§Œ Git Goblin"
      - "ğŸ¦‰ Index Owl"
      
  concept:
    description: "An abstract idea or protocol"
    typical_stats:
      - depth
      - applicability
      - learning_curve
    examples:
      - "YAML-JAZZ"
      - "PLAY-LEARN-LIFT"
      
  place:
    description: "A room/location link"
    typical_stats:
      - accessibility
      - richness
    integrates_with: "room, memory-palace"
      
  technique:
    description: "A method or approach"
    typical_stats:
      - effectiveness
      - learning_curve
      - applicability
      
  artifact:
    description: "Persistent thing with effects"
    typical_stats:
      - durability
      - power
      - side_effects

rarity_levels:
  common:
    description: "Basic, widely applicable"
    drop_rate: "60%"
    
  uncommon:
    description: "More specialized"
    drop_rate: "25%"
    
  rare:
    description: "Powerful, specific use"
    drop_rate: "12%"
    
  legendary:
    description: "Unique, transformative"
    drop_rate: "3%"

commands:
  CARD:
    syntax: "CARD [name] [type]"
    action: "Create new card"
    
  PLAY:
    syntax: "PLAY [card]"
    action: "Activate card ability"
    
  COLLECT:
    syntax: "COLLECT [card]"
    action: "Add to collection"
    
  DECK:
    syntax: "DECK [name]"
    action: "Build or select deck"
    
  DRAW:
    syntax: "DRAW"
    action: "Random card from deck"

working_set:
  always_include:
    - "COLLECTION.yml"
    - "DECK.yml"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# FAMILIARS (Special Card Type)
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

familiars:
  description: "Cards that embody tool capabilities as helper spirits"
  
  examples:
    - name: "Git Goblin"
      emoji: "ğŸ§Œ"
      domain: "Version control"
      abilities: ["track changes", "commit", "navigate history", "bisect"]
      
    - name: "Index Owl"
      emoji: "ğŸ¦‰"
      domain: "Search and lookup"
      abilities: ["semantic search", "find references", "index contents"]
      
    - name: "Memory Moth"
      emoji: "ğŸ¦‹"
      domain: "Context management"
      abilities: ["summarize", "hot/cold hints", "working set"]
      
    - name: "Repair Imp"
      emoji: "ğŸ”§"
      domain: "Self-healing"
      abilities: ["run checklist", "fix missing files", "repair state"]
      
    - name: "Session Scribe"
      emoji: "ğŸ“œ"
      domain: "Logging"
      abilities: ["log events", "audit trail", "append-only writes"]

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# INTEGRATION
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

integrates_with:
  - skill: "room"
    how: "Cards are activated in rooms as instances"
    
  - skill: "soul-chat"
    how: "Characters become character cards that can speak"
    
  - skill: "memory-palace"
    how: "Collections populate palace rooms"
    
  - skill: "adventure"
    how: "Cards as companion helpers"
    
  - protocol: "P-HANDLE-K"
    how: "Familiars are safe K-line wrappers for tools"
    
  - protocol: "K-LINE"
    how: "Card names invoke conceptual traditions"
