# CARD.yml — Advertisement
#
# Objects announce what they can do — The Sims style.
# "Objects don't wait to be used — they announce what's possible."

card:
  name: ADVERTISEMENT
  type: [skill, interaction, game]
  tier: 1
  invoke_when: ["Need objects to announce actions", "Build plug-in interactions"]
  advertisement_names:
    - DISCOVER-ACTIONS
    - BUILD-OBJECT
    - UNDERSTAND-SIMS
  related:
    - skills/action-queue
    - skills/room
    - skills/needs
    - skills/card
    - skills/coherence-engine
    - skills/rubric
  tags: [moollm, sims, interaction, advertisement]
  description: |
    Sims-style object interaction: every object broadcasts available actions,
    scored by relevance. Use for plug-in architectures where objects
    self-describe behaviors. "Objects don't wait to be used — they announce
    what's possible."

# TOOLS REQUIRED

tools:
  required:
    - read_file   # Read object advertisements
    - write_file  # Update ad scores/state
    - list_dir    # Find objects in room
  optional: []

methods:
  SCAN:
    description: "Collect all advertisements from current room"
    parameters:
      room: "Path to room (defaults to current)"
    output: chat
    effect: "Read *.yml, extract ads, score and sort"

  SHOW:
    description: "Display what an object advertises"
    parameters:
      object: "Object to inspect"
    output: chat
    effect: "Show object's ads with scores"

  SELECT:
    description: "Choose an advertised action"
    parameters:
      object: "Object offering the action"
      action: "Action to take"
    output: chat + state-change
    effect: "Execute the action; may queue more actions"

  EVALUATE:
    description: "Score ads against character needs"
    parameters:
      character: "Character to score for"
    output: chat
    effect: "Adjust scores based on needs/goals/context"

# STATE
# Advertisements are declared in object files, not here

state:
  # Ads live on objects; this card has no persistent instance state.
  advertisement-schema:
    action:
      type: string
      description: "Action name (CRAFT, EXAMINE, USE, etc.)"
    description:
      type: string
      description: "What the action does"
    preconditions:
      type: array
      description: "What must be true for action to be available"
    score:
      type: integer
      description: "Base score (0-100)"
    score-if:
      type: string
      description: "Condition that modifies score"
    satisfies:
      type: array
      description: "What needs/goals this action satisfies"

# ADVERTISEMENTS
# What this card offers (yes, it advertises its own advertisements)

advertisements:
  DISCOVER-ACTIONS:
    score: 90
    condition: "New room or unsure what to do"
    effect: "Scan and list ads with scores"
    delegate:
      method: SCAN
      params:
        room: "{{room|.}}"
  BUILD-OBJECT:
    score: 85
    condition: "Creating an object that needs interactions"
    effect: "Show example ad schema and scoring"
    delegate:
      method: SHOW
      params:
        object: "{{object|example}}"
  UNDERSTAND-SIMS:
    score: 75
    condition: "Learning how Sims-style interaction works"
    effect: "Explain advertisement system and scoring"
    delegate:
      method: EVALUATE
      params:
        character: "{{character|player}}"

# THE SIMS SECRET SAUCE
# Why this pattern enabled massive expansion

sims-insight:
  why-it-worked:
    - "User-created objects — anyone could make new furniture/items"
    - "Expansion packs — drop in new objects with advertisements"
    - "No code changes — objects self-describe behaviors"
    - "Infinite variety — community created millions of objects"
    
  moollm-parallel:
    - "YAML files self-describe capabilities"
    - "New skills/objects plug in without changing core"
    - "LLM reads descriptions, figures out interactions"
    - "Community can share object definitions"

# PIE MENU INTEGRATION

pie-menu:
  description: "Advertisements naturally map to pie menus"
  behavior: |
    When player clicks an object, advertisements become
    pie menu slices, sorted by score, highest at top.
    
    Just like Don Hopkins' original pie menus: fast access
    to contextually-relevant actions.

# RELATED

see-also:
  - skills/action-queue    # Actions get queued from ads
  - skills/room            # Where objects live
  - skills/needs           # Scores adjusted by needs
  - skills/card            # Cards have advertisements too
  - skills/coherence-engine # Orchestrates ad evaluation
  - skills/rubric          # Structured scoring criteria

# CREDITS

credits:
  inspiration:
    - "Will Wright — The Sims advertisement system"
    - "Don Hopkins — Pie Menus"
  lineage:
    - "The Sims (2000) — original implementation"
    - "HyperCard — objects handle their own events"
